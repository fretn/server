{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/store/api.js","webpack:///./src/App.vue?647a","webpack:///src/App.vue","webpack:///./src/App.vue?c7f8","webpack:///./src/App.vue","webpack:///./src/router.js","webpack:///./src/store/users.js","webpack:///./src/store/apps.js","webpack:///./src/store/settings.js","webpack:///./src/store/oc.js","webpack:///./src/store/index.js","webpack:///./src/main-apps-users-management.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","4","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","nextcloud_axios__WEBPACK_IMPORTED_MODULE_0__","nextcloud_axios__WEBPACK_IMPORTED_MODULE_0___default","nextcloud_password_confirmation__WEBPACK_IMPORTED_MODULE_1__","nextcloud_password_confirmation__WEBPACK_IMPORTED_MODULE_1___default","sanitize","url","replace","__webpack_exports__","requireAdmin","confirmPassword","axios","post","patch","put","delete","Appvue_type_template_id_7ba5bd90_render","_h","this","$createElement","_self","_c","_withStripped","src_Appvue_type_script_lang_js_","beforeMount","getElementById","$store","commit","JSON","parse","dataset","server","component","componentNormalizer","options","__file","App","Users","then","Apps","Vue","use","Router","router","base","OC","generateUrl","linkActiveClass","routes","path","props","children","orderGroups","groups","orderBy","sort","a","b","usercount","disabled","localeCompare","defaults","id","canAdd","canRemove","users","state","minPasswordLength","usersOffset","usersLimit","userCount","mutations","appendUsers","usersObj","concat","keys","map","userid","setPasswordPolicyMinLength","initGroups","_ref","group","assign","addGroup","_ref2","gid","displayName","find","log","removeGroup","groupIndex","findIndex","groupSearch","addUserGroup","_ref3","user","enabled","removeUserGroup","_ref4","indexOf","addUserSubAdmin","_ref5","subadmin","removeUserSubAdmin","_ref6","deleteUser","userIndex","addUserData","response","ocs","enableDisableUser","_ref7","forEach","setUserData","_ref8","humanValue","Util","computerFileSize","resetUsers","getters","getUsers","getGroups","getSubadminGroups","filter","getPasswordPolicyMinLength","getUsersOffset","getUsersLimit","getUserCount","actions","context","_ref9","offset","limit","search","api","linkToOCS","catch","_ref10","limitParam","getUsersFromList","_ref11","getUsersFromGroup","_ref12","groupid","oc_capabilities","password_policy","minLength","_ref13","_ref14","_ref15","_ref16","addUser","_ref17","_ref18","dispatch","password","email","quota","language","_ref19","_ref19$enabled","userStatus","_ref20","allowedEmpty","sendWelcomeMail","store_apps","apps","categories","updateCount","loading","loadingList","APPS_API_FAILURE","Notification","showHtml","message","initCategories","setUpdateCount","addCategory","category","appendCategories","categoriesArray","setAllApps","setError","appId","Array","isArray","_id","app","clearError","enableApp","active","disableApp","removable","canUnInstall","uninstallApp","needsDownload","installed","canInstall","updateApp","version","update","resetApps","reset","startLoading","set","stopLoading","getCategories","getAllApps","getUpdateCount","appIds","_appId","update_required","dialogs","info","location","reload","settings","serverData","setServerData","getServerData","oc","setAppConfig","Vuex","API_FAILURE","meta","showTemporary","store","Store","strict","process","main_apps_users_management_app","sync","__webpack_nonce__","btoa","requestToken","__webpack_public_path__","linkTo","OCA","oc_userconfig","oc_current_user","render","h","$mount"],"mappings":"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","file":"vue-settings-apps-users-management.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t4: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"vue-\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([45,1,5]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport axios from 'nextcloud-axios'\nimport confirmPassword from 'nextcloud-password-confirmation' \n\nconst sanitize = function(url) {\n\treturn url.replace(/\\/$/, ''); // Remove last url slash\n};\n\nexport default {\n\n\t/**\n\t * This Promise is used to chain a request that require an admin password confirmation\n\t * Since chaining Promise have a very precise behavior concerning catch and then,\n\t * you'll need to be careful when using it.\n\t * e.g\n\t * // store\n\t * \taction(context) {\n\t *\t\treturn api.requireAdmin().then((response) => {\n\t *\t\t\treturn api.get('url')\n\t *\t\t\t\t.then((response) => {API success})\n\t *\t\t\t\t.catch((error) => {API failure});\n\t *\t\t}).catch((error) => {requireAdmin failure});\n\t *\t}\n\t * // vue\n\t *\tthis.$store.dispatch('action').then(() => {always executed})\n\t *\n\t * Since Promise.then().catch().then() will always execute the last then\n\t * this.$store.dispatch('action').then will always be executed\n\t * \n\t * If you want requireAdmin failure to also catch the API request failure\n\t * you will need to throw a new error in the api.get.catch()\n\t * \n\t * e.g\n\t *\tapi.requireAdmin().then((response) => {\n\t *\t\tapi.get('url')\n\t *\t\t\t.then((response) => {API success})\n\t *\t\t\t.catch((error) => {throw error;});\n\t *\t}).catch((error) => {requireAdmin OR API failure});\n\t * \n\t * @returns {Promise}\n\t */\n\trequireAdmin() {\n\t\treturn confirmPassword();\n\t},\n\tget(url) {\n\t\treturn axios.get(sanitize(url));\n\t},\n\tpost(url, data) {\n\t\treturn axios.post(sanitize(url), data);\n\t},\n\tpatch(url, data) {\n\t\treturn axios.patch(sanitize(url), data);\n\t},\n\tput(url, data) {\n\t\treturn axios.put(sanitize(url), data);\n\t},\n\tdelete(url, data) {\n\t\treturn axios.delete(sanitize(url), { data: data });\n\t}\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"router-view\")\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<router-view></router-view>\n</template>\n\n<script>\nexport default {\n\tname: 'App',\n\tbeforeMount: function() {\n\t\t// importing server data into the store\n\t\tconst serverDataElmt = document.getElementById('serverData');\n\t\tif (serverDataElmt !== null) {\n\t\t\tthis.$store.commit('setServerData', JSON.parse(document.getElementById('serverData').dataset.server));\n\t\t}\n\t}\n}\n</script>\n","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7ba5bd90&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/admin/Docker/server/settings/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n    module.hot.accept(\"./App.vue?vue&type=template&id=7ba5bd90&\", function () {\n      api.rerender('7ba5bd90', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports","/*\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport Router from 'vue-router';\n\n// Dynamic loading\nconst Users = () => import('./views/Users');\nconst Apps = () => import('./views/Apps');\n\nVue.use(Router);\n\n/*\n * This is the list of routes where the vuejs app will\n * take over php to provide data\n * You need to forward the php routing (routes.php) to\n * the settings-vue template, where the vue-router will\n * ensure the proper route.\n * ⚠️ Routes needs to match the php routes.\n */\n\nexport default new Router({\n\tmode: 'history',\n\t// if index.php is in the url AND we got this far, then it's working:\n\t// let's keep using index.php in the url\n\tbase: OC.generateUrl(''),\n\tlinkActiveClass: 'active',\n\troutes: [\n\t\t{\n\t\t\tpath: '/:index(index.php/)?settings/users',\n\t\t\tcomponent: Users,\n\t\t\tprops: true,\n\t\t\tname: 'users',\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tpath: ':selectedGroup(.*)',\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tcomponent: Users\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tpath: '/:index(index.php/)?settings/apps',\n\t\t\tcomponent: Apps,\n\t\t\tprops: true,\n\t\t\tname: 'apps',\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tpath: ':category',\n\t\t\t\t\tname: 'apps-category',\n\t\t\t\t\tcomponent: Apps,\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpath: ':id',\n\t\t\t\t\t\t\tname: 'apps-details',\n\t\t\t\t\t\t\tcomponent: Apps\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n});\n","/*\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api';\n\nconst orderGroups = function(groups, orderBy) {\n\t/* const SORT_USERCOUNT = 1;\n\t * const SORT_GROUPNAME = 2;\n\t * https://github.com/nextcloud/server/blob/208e38e84e1a07a49699aa90dc5b7272d24489f0/lib/private/Group/MetaData.php#L34\n\t */\n\tif (orderBy === 1) {\n\t\treturn groups.sort((a, b) => a.usercount-a.disabled < b.usercount - b.disabled);\n\t} else {\n\t\treturn groups.sort((a, b) => a.name.localeCompare(b.name));\n\t}\n};\n\nconst defaults = {\n\tgroup: {\n\t\tid: '',\n\t\tname: '',\n\t\tusercount: 0,\n\t\tdisabled: 0,\n\t\tcanAdd: true,\n\t\tcanRemove: true\n\t}\n};\n\nconst state = {\n\tusers: [],\n\tgroups: [],\n\torderBy: 1,\n\tminPasswordLength: 0,\n\tusersOffset: 0,\n\tusersLimit: 25,\n\tuserCount: 0\n};\n\nconst mutations = {\n\tappendUsers(state, usersObj) {\n\t\t// convert obj to array\n\t\tlet users = state.users.concat(Object.keys(usersObj).map(userid => usersObj[userid]));\n\t\tstate.usersOffset += state.usersLimit;\n\t\tstate.users = users;\n\t},\n\tsetPasswordPolicyMinLength(state, length) {\n\t\tstate.minPasswordLength = length!=='' ? length : 0;\n\t},\n\tinitGroups(state, {groups, orderBy, userCount}) {\n\t\tstate.groups = groups.map(group => Object.assign({}, defaults.group, group));\n\t\tstate.orderBy = orderBy;\n\t\tstate.userCount = userCount;\n\t\tstate.groups = orderGroups(state.groups, state.orderBy);\n\t\t\n\t},\n\taddGroup(state, {gid, displayName}) {\n\t\ttry {\n\t\t\tif (typeof state.groups.find((group) => group.id === gid) !== 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// extend group to default values\n\t\t\tlet group = Object.assign({}, defaults.group, {\n\t\t\t\tid: gid,\n\t\t\t\tname: displayName,\n\t\t\t});\n\t\t\tstate.groups.push(group);\n\t\t\tstate.groups = orderGroups(state.groups, state.orderBy);\n\t\t} catch (e) {\n\t\t\tconsole.log('Can\\'t create group', e);\n\t\t}\n\t},\n\tremoveGroup(state, gid) {\n\t\tlet groupIndex = state.groups.findIndex(groupSearch => groupSearch.id == gid);\n\t\tif (groupIndex >= 0) {\n\t\t\tstate.groups.splice(groupIndex, 1);\n\t\t}\n\t},\n\taddUserGroup(state, { userid, gid }) {\n\t\tlet group = state.groups.find(groupSearch => groupSearch.id == gid);\n\t\tlet user = state.users.find(user => user.id == userid);\n\t\t// increase count if user is enabled\n\t\tif (group && user.enabled) {\n\t\t\tgroup.usercount++; \n\t\t}\n\t\tlet groups = user.groups;\n\t\tgroups.push(gid);\n\t\tstate.groups = orderGroups(state.groups, state.orderBy);\n\t},\n\tremoveUserGroup(state, { userid, gid }) {\n\t\tlet group = state.groups.find(groupSearch => groupSearch.id == gid);\n\t\tlet user = state.users.find(user => user.id == userid);\n\t\t// lower count if user is enabled\n\t\tif (group && user.enabled) {\n\t\t\tgroup.usercount--;\n\t\t}\n\t\tlet groups = user.groups;\n\t\tgroups.splice(groups.indexOf(gid),1);\n\t\tstate.groups = orderGroups(state.groups, state.orderBy);\n\t},\n\taddUserSubAdmin(state, { userid, gid }) {\n\t\tlet groups = state.users.find(user => user.id == userid).subadmin;\n\t\tgroups.push(gid);\n\t},\n\tremoveUserSubAdmin(state, { userid, gid }) {\n\t\tlet groups = state.users.find(user => user.id == userid).subadmin;\n\t\tgroups.splice(groups.indexOf(gid),1);\n\t},\n\tdeleteUser(state, userid) {\n\t\tlet userIndex = state.users.findIndex(user => user.id == userid);\n\t\tstate.users.splice(userIndex, 1);\n\t},\n\taddUserData(state, response) {\n\t\tstate.users.push(response.data.ocs.data);\n\t},\n\tenableDisableUser(state, { userid, enabled }) {\n\t\tlet user  = state.users.find(user => user.id == userid);\n\t\tuser.enabled = enabled;\n\t\t// increment or not\n\t\tstate.groups.find(group => group.id == 'disabled').usercount += enabled ? -1 : 1;\n\t\tstate.userCount += enabled ? 1 : -1;\n\t\tuser.groups.forEach(group => {\n\t\t\t// Increment disabled count\n\t\t\tstate.groups.find(groupSearch => groupSearch.id == group).disabled += enabled ? -1 : 1;\n\t\t});\n\t},\n\tsetUserData(state, { userid, key, value }) {\n\t\tif (key === 'quota') {\n\t\t\tlet humanValue = OC.Util.computerFileSize(value);\n\t\t\tstate.users.find(user => user.id == userid)[key][key] = humanValue!==null ? humanValue : value;\n\t\t} else {\n\t\t\tstate.users.find(user => user.id == userid)[key] = value;\n\t\t}\n\t},\n\n\t/**\n\t * Reset users list\n\t */\n\tresetUsers(state) {\n\t\tstate.users = [];\n\t\tstate.usersOffset = 0;\n\t}\n};\n\nconst getters = {\n\tgetUsers(state) {\n\t\treturn state.users;\n\t},\n\tgetGroups(state) {\n\t\treturn state.groups;\n\t},\n\tgetSubadminGroups(state) {\n\t\t// Can't be subadmin of admin or disabled\n\t\treturn state.groups.filter(group => group.id !== 'admin' && group.id !== 'disabled');\n\t},\n\tgetPasswordPolicyMinLength(state) {\n\t\treturn state.minPasswordLength;\n\t},\n\tgetUsersOffset(state) {\n\t\treturn state.usersOffset;\n\t},\n\tgetUsersLimit(state) {\n\t\treturn state.usersLimit;\n\t},\n\tgetUserCount(state) {\n\t\treturn state.userCount;\n\t}\n};\n\nconst actions = {\n\n\t/**\n\t * Get all users with full details\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {int} options.offset List offset to request\n\t * @param {int} options.limit List number to return from offset\n\t * @param {string} options.search Search amongst users\n\t * @param {string} options.group Get users from group\n\t * @returns {Promise}\n\t */\n\tgetUsers(context, { offset, limit, search, group }) {\n\t\tsearch = typeof search === 'string' ? search : '';\n\t\tgroup = typeof group === 'string' ? group : '';\n\t\tif (group !== '') {\n\t\t\treturn api.get(OC.linkToOCS(`cloud/groups/${group}/users/details?offset=${offset}&limit=${limit}&search=${search}`, 2))\n\t\t\t.then((response) => {\n\t\t\t\tif (Object.keys(response.data.ocs.data.users).length > 0) {\n\t\t\t\t\tcontext.commit('appendUsers', response.data.ocs.data.users);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t\t}\n\n\t\treturn api.get(OC.linkToOCS(`cloud/users/details?offset=${offset}&limit=${limit}&search=${search}`, 2))\n\t\t\t.then((response) => {\n\t\t\t\tif (Object.keys(response.data.ocs.data.users).length > 0) {\n\t\t\t\t\tcontext.commit('appendUsers', response.data.ocs.data.users);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t},\n\n\tgetGroups(context, { offset, limit, search }) {\n\t\tsearch = typeof search === 'string' ? search : '';\n\t\tlet limitParam = limit === -1 ? '' : `&limit=${limit}`;\n\t\treturn api.get(OC.linkToOCS(`cloud/groups?offset=${offset}&search=${search}${limitParam}`, 2))\n\t\t\t.then((response) => {\n\t\t\t\tif (Object.keys(response.data.ocs.data.groups).length > 0) {\n\t\t\t\t\tresponse.data.ocs.data.groups.forEach(function(group) {\n\t\t\t\t\t\tcontext.commit('addGroup', {gid: group, displayName: group});\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t},\n\n\t/**\n\t * Get all users with full details\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {int} options.offset List offset to request\n\t * @param {int} options.limit List number to return from offset\n\t * @returns {Promise}\n\t */\n\tgetUsersFromList(context, { offset, limit, search }) {\n\t\tsearch = typeof search === 'string' ? search : '';\n\t\treturn api.get(OC.linkToOCS(`cloud/users/details?offset=${offset}&limit=${limit}&search=${search}`, 2))\n\t\t\t.then((response) => {\n\t\t\t\tif (Object.keys(response.data.ocs.data.users).length > 0) {\n\t\t\t\t\tcontext.commit('appendUsers', response.data.ocs.data.users);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t},\n\n\t/**\n\t * Get all users with full details from a groupid\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {int} options.offset List offset to request\n\t * @param {int} options.limit List number to return from offset\n\t * @returns {Promise}\n\t */\n\tgetUsersFromGroup(context, { groupid, offset, limit }) {\n\t\treturn api.get(OC.linkToOCS(`cloud/users/${groupid}/details?offset=${offset}&limit=${limit}`, 2))\n\t\t\t.then((response) => context.commit('getUsersFromList', response.data.ocs.data.users))\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t},\n\t\n\n\tgetPasswordPolicyMinLength(context) {\n\t\tif(oc_capabilities.password_policy && oc_capabilities.password_policy.minLength) {\n\t\t\tcontext.commit('setPasswordPolicyMinLength', oc_capabilities.password_policy.minLength);\n\t\t\treturn oc_capabilities.password_policy.minLength;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Add group\n\t * \n\t * @param {Object} context\n\t * @param {string} gid Group id\n\t * @returns {Promise}\n\t */\n\taddGroup(context, gid) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`cloud/groups`, 2), {groupid: gid})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcontext.commit('addGroup', {gid: gid, displayName: gid})\n\t\t\t\t\treturn {gid: gid, displayName: gid}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => {\n\t\t\tcontext.commit('API_FAILURE', { gid, error });\n\t\t\t// let's throw one more time to prevent the view\n\t\t\t// from adding the user to a group that doesn't exists\n\t\t\tthrow error;\n\t\t});\n\t},\n\n\t/**\n\t * Remove group\n\t * \n\t * @param {Object} context\n\t * @param {string} gid Group id\n\t * @returns {Promise}\n\t */\n\tremoveGroup(context, gid) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.delete(OC.linkToOCS(`cloud/groups/${gid}`, 2))\n\t\t\t\t.then((response) => context.commit('removeGroup', gid))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { gid, error }));\n\t},\n\n\t/**\n\t * Add user to group\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.gid Group id\n\t * @returns {Promise}\n\t */\n\taddUserGroup(context, { userid, gid }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`cloud/users/${userid}/groups`, 2), { groupid: gid })\n\t\t\t\t.then((response) => context.commit('addUserGroup', { userid, gid }))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/**\n\t * Remove user from group\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.gid Group id\n\t * @returns {Promise}\n\t */\n\tremoveUserGroup(context, { userid, gid }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.delete(OC.linkToOCS(`cloud/users/${userid}/groups`, 2), { groupid: gid })\n\t\t\t\t.then((response) => context.commit('removeUserGroup', { userid, gid }))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => {\n\t\t\tcontext.commit('API_FAILURE', { userid, error });\n\t\t\t// let's throw one more time to prevent\n\t\t\t// the view from removing the user row on failure\n\t\t\tthrow error; \n\t\t});\n\t},\n\n\t/**\n\t * Add user to group admin\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.gid Group id\n\t * @returns {Promise}\n\t */\n\taddUserSubAdmin(context, { userid, gid }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`cloud/users/${userid}/subadmins`, 2),  { groupid: gid })\n\t\t\t\t.then((response) => context.commit('addUserSubAdmin', { userid, gid }))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/**\n\t * Remove user from group admin\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.gid Group id\n\t * @returns {Promise}\n\t */\n\tremoveUserSubAdmin(context, { userid, gid }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.delete(OC.linkToOCS(`cloud/users/${userid}/subadmins`, 2), { groupid: gid })\n\t\t\t\t.then((response) => context.commit('removeUserSubAdmin', { userid, gid }))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/**\n\t * Delete a user\n\t * \n\t * @param {Object} context\n\t * @param {string} userid User id \n\t * @returns {Promise}\n\t */\n\tdeleteUser(context, userid) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.delete(OC.linkToOCS(`cloud/users/${userid}`, 2))\n\t\t\t\t.then((response) => context.commit('deleteUser', userid))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/**\n\t * Add a user\n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.password User password\n\t * @param {string} options.displayName User display name\n\t * @param {string} options.email User email\n\t * @param {string} options.groups User groups\n\t * @param {string} options.subadmin User subadmin groups\n\t * @param {string} options.quota User email\n\t * @returns {Promise}\n\t */\n\taddUser({commit, dispatch}, { userid, password, displayName, email, groups, subadmin, quota, language }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`cloud/users`, 2), { userid, password, displayName, email, groups, subadmin, quota, language })\n\t\t\t\t.then((response) => dispatch('addUserData', userid))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => {\n\t\t\tcommit('API_FAILURE', { userid, error });\n\t\t\tthrow error;\n\t\t});\n\t},\n\n\t/**\n\t * Get user data and commit addition\n\t * \n\t * @param {Object} context\n\t * @param {string} userid User id \n\t * @returns {Promise}\n\t */\n\taddUserData(context, userid) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.get(OC.linkToOCS(`cloud/users/${userid}`, 2))\n\t\t\t\t.then((response) => context.commit('addUserData', response))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/** Enable or disable user \n\t * \n\t * @param {Object} context\n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {boolean} options.enabled User enablement status\n\t * @returns {Promise}\n\t */\n\tenableDisableUser(context, { userid, enabled = true }) {\n\t\tlet userStatus = enabled ? 'enable' : 'disable';\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.put(OC.linkToOCS(`cloud/users/${userid}/${userStatus}`, 2))\n\t\t\t\t.then((response) => context.commit('enableDisableUser', { userid, enabled }))\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t},\n\n\t/**\n\t * Edit user data\n\t * \n\t * @param {Object} context \n\t * @param {Object} options\n\t * @param {string} options.userid User id\n\t * @param {string} options.key User field to edit\n\t * @param {string} options.value Value of the change\n\t * @returns {Promise}\n\t */\n\tsetUserData(context, { userid, key, value }) {\n\t\tlet allowedEmpty = ['email', 'displayname'];\n\t\tif (['email', 'language', 'quota', 'displayname', 'password'].indexOf(key) !== -1) {\n\t\t\t// We allow empty email or displayname\n\t\t\tif (typeof value === 'string' &&\n\t\t\t\t(\n\t\t\t\t\t(allowedEmpty.indexOf(key) === -1 && value.length > 0) ||\n\t\t\t\t\tallowedEmpty.indexOf(key) !== -1\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn api.requireAdmin().then((response) => {\n\t\t\t\t\treturn api.put(OC.linkToOCS(`cloud/users/${userid}`, 2), { key: key, value: value })\n\t\t\t\t\t\t.then((response) => context.commit('setUserData', { userid, key, value }))\n\t\t\t\t\t\t.catch((error) => {throw error;});\n\t\t\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t\t\t}\n\t\t}\n\t\treturn Promise.reject(new Error('Invalid request data'));\n\t},\n\n\t/**\n\t * Send welcome mail\n\t * \n\t * @param {Object} context\n\t * @param {string} userid User id \n\t * @returns {Promise}\n\t */\n\tsendWelcomeMail(context, userid) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`cloud/users/${userid}/welcome`, 2))\n\t\t\t\t.then(response => true)\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { userid, error }));\n\t}\n};\n\nexport default { state, mutations, getters, actions };\n","/*\n * @copyright Copyright (c) 2018 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api';\nimport Vue from 'vue';\n\nconst state = {\n\tapps: [],\n\tcategories: [],\n\tupdateCount: 0,\n\tloading: {},\n\tloadingList: false,\n};\n\nconst mutations = {\n\n\tAPPS_API_FAILURE(state, error) {\n\t\tOC.Notification.showHtml(t('settings','An error occured during the request. Unable to proceed.')+'<br>'+error.error.response.data.data.message, {timeout: 7});\n\t\tconsole.log(state, error);\n\t},\n\n\tinitCategories(state, {categories, updateCount}) {\n\t\tstate.categories = categories;\n\t\tstate.updateCount = updateCount;\n\t},\n\n\tsetUpdateCount(state, updateCount) {\n\t\tstate.updateCount = updateCount;\n\t},\n\n\taddCategory(state, category) {\n\t\tstate.categories.push(category);\n\t},\n\n\tappendCategories(state, categoriesArray) {\n\t\t// convert obj to array\n\t\tstate.categories = categoriesArray;\n\t},\n\n\tsetAllApps(state, apps) {\n\t\tstate.apps = apps;\n\t},\n\n\tsetError(state, {appId, error}) {\n\t\tif (!Array.isArray(appId)) {\n\t\t\tappId = [appId];\n\t\t}\n\t\tappId.forEach((_id) => {\n\t\t\tlet app = state.apps.find(app => app.id === _id);\n\t\t\tapp.error = error;\n\t\t});\n\t},\n\n\tclearError(state, {appId, error}) {\n\t\tlet app = state.apps.find(app => app.id === appId);\n\t\tapp.error = null;\n\t},\n\n\tenableApp(state, {appId, groups}) {\n\t\tlet app = state.apps.find(app => app.id === appId);\n\t\tapp.active = true;\n\t\tapp.groups = groups;\n\t},\n\n\tdisableApp(state, appId) {\n\t\tlet app = state.apps.find(app => app.id === appId);\n\t\tapp.active = false;\n\t\tapp.groups = [];\n\t\tif (app.removable) {\n\t\t\tapp.canUnInstall = true;\n\t\t}\n\t},\n\n\tuninstallApp(state, appId) {\n\t\tstate.apps.find(app => app.id === appId).active = false;\n\t\tstate.apps.find(app => app.id === appId).groups = [];\n\t\tstate.apps.find(app => app.id === appId).needsDownload = true;\n\t\tstate.apps.find(app => app.id === appId).installed = false;\n\t\tstate.apps.find(app => app.id === appId).canUnInstall = false;\n\t\tstate.apps.find(app => app.id === appId).canInstall = true;\n\t},\n\n\tupdateApp(state, appId) {\n\t\tlet app = state.apps.find(app => app.id === appId);\n\t\tlet version = app.update;\n\t\tapp.update = null;\n\t\tapp.version = version;\n\t\tstate.updateCount--;\n\n\t},\n\n\tresetApps(state) {\n\t\tstate.apps = [];\n\t},\n\treset(state) {\n\t\tstate.apps = [];\n\t\tstate.categories = [];\n\t\tstate.updateCount = 0;\n\t},\n\tstartLoading(state, id) {\n\t\tif (Array.isArray(id)) {\n\t\t\tid.forEach((_id) => {\n\t\t\t\tVue.set(state.loading, _id, true);\n\t\t\t})\n\t\t} else {\n\t\t\tVue.set(state.loading, id, true);\n\t\t}\n\t},\n\tstopLoading(state, id) {\n\t\tif (Array.isArray(id)) {\n\t\t\tid.forEach((_id) => {\n\t\t\t\tVue.set(state.loading, _id, false);\n\t\t\t})\n\t\t} else {\n\t\t\tVue.set(state.loading, id, false);\n\t\t}\n\t},\n};\n\nconst getters = {\n\tloading(state) {\n\t\treturn function(id) {\n\t\t\treturn state.loading[id];\n\t\t}\n\t},\n\tgetCategories(state) {\n\t\treturn state.categories;\n\t},\n\tgetAllApps(state) {\n\t\treturn state.apps;\n\t},\n\tgetUpdateCount(state) {\n\t\treturn state.updateCount;\n\t}\n};\n\nconst actions = {\n\n\tenableApp(context, { appId, groups }) {\n\t\tlet apps;\n\t\tif (Array.isArray(appId)) {\n\t\t\tapps = appId;\n\t\t} else {\n\t\t\tapps = [appId];\n\t\t}\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\tcontext.commit('startLoading', apps);\n\t\t\tcontext.commit('startLoading', 'install');\n\t\t\treturn api.post(OC.generateUrl(`settings/apps/enable`), {appIds: apps, groups: groups})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcontext.commit('stopLoading', apps);\n\t\t\t\t\tcontext.commit('stopLoading', 'install');\n\t\t\t\t\tapps.forEach(_appId => {\n\t\t\t\t\t\tcontext.commit('enableApp', {appId: _appId, groups: groups});\n\t\t\t\t\t});\n\n\t\t\t\t\t// check for server health\n\t\t\t\t\treturn api.get(OC.generateUrl('apps/files'))\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (response.data.update_required) {\n\t\t\t\t\t\t\t\tOC.dialogs.info(\n\t\t\t\t\t\t\t\t\tt(\n\t\t\t\t\t\t\t\t\t\t'settings',\n\t\t\t\t\t\t\t\t\t\t'The app has been enabled but needs to be updated. You will be redirected to the update page in 5 seconds.'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tt('settings','App update'),\n\t\t\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t\t}, 5000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tif (!Array.isArray(appId)) {\n\t\t\t\t\t\t\t\tcontext.commit('setError', {\n\t\t\t\t\t\t\t\t\tappId: apps,\n\t\t\t\t\t\t\t\t\terror: t('settings', 'Error: This app can not be enabled because it makes the server unstable')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tcontext.commit('stopLoading', apps);\n\t\t\t\t\tcontext.commit('stopLoading', 'install');\n\t\t\t\t\tcontext.commit('setError', {\n\t\t\t\t\t\tappId: apps,\n\t\t\t\t\t\terror: error.response.data.data.message\n\t\t\t\t\t});\n\t\t\t\t\tcontext.commit('APPS_API_FAILURE', { appId, error});\n\t\t\t\t})\n\t\t}).catch((error) => context.commit('API_FAILURE', { appId, error }));\n\t},\n\tdisableApp(context, { appId }) {\n\t\tlet apps;\n\t\tif (Array.isArray(appId)) {\n\t\t\tapps = appId;\n\t\t} else {\n\t\t\tapps = [appId];\n\t\t}\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\tcontext.commit('startLoading', apps);\n\t\t\treturn api.post(OC.generateUrl(`settings/apps/disable`), {appIds: apps})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcontext.commit('stopLoading', apps);\n\t\t\t\t\tapps.forEach(_appId => {\n\t\t\t\t\t\tcontext.commit('disableApp', _appId);\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tcontext.commit('stopLoading', apps);\n\t\t\t\t\tcontext.commit('APPS_API_FAILURE', { appId, error })\n\t\t\t\t})\n\t\t}).catch((error) => context.commit('API_FAILURE', { appId, error }));\n\t},\n\tuninstallApp(context, { appId }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\tcontext.commit('startLoading', appId);\n\t\t\treturn api.get(OC.generateUrl(`settings/apps/uninstall/${appId}`))\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcontext.commit('stopLoading', appId);\n\t\t\t\t\tcontext.commit('uninstallApp', appId);\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tcontext.commit('stopLoading', appId);\n\t\t\t\t\tcontext.commit('APPS_API_FAILURE', { appId, error })\n\t\t\t\t})\n\t\t}).catch((error) => context.commit('API_FAILURE', { appId, error }));\n\t},\n\n\tupdateApp(context, { appId }) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\tcontext.commit('startLoading', appId);\n\t\t\tcontext.commit('startLoading', 'install');\n\t\t\treturn api.get(OC.generateUrl(`settings/apps/update/${appId}`))\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcontext.commit('stopLoading', 'install');\n\t\t\t\t\tcontext.commit('stopLoading', appId);\n\t\t\t\t\tcontext.commit('updateApp', appId);\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tcontext.commit('stopLoading', appId);\n\t\t\t\t\tcontext.commit('stopLoading', 'install');\n\t\t\t\t\tcontext.commit('APPS_API_FAILURE', { appId, error })\n\t\t\t\t})\n\t\t}).catch((error) => context.commit('API_FAILURE', { appId, error }));\n\t},\n\n\tgetAllApps(context) {\n\t\tcontext.commit('startLoading', 'list');\n\t\treturn api.get(OC.generateUrl(`settings/apps/list`))\n\t\t\t.then((response) => {\n\t\t\t\tcontext.commit('setAllApps', response.data.apps);\n\t\t\t\tcontext.commit('stopLoading', 'list');\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error))\n\t},\n\n\tgetCategories(context) {\n\t\tcontext.commit('startLoading', 'categories');\n\t\treturn api.get(OC.generateUrl('settings/apps/categories'))\n\t\t\t.then((response) => {\n\t\t\t\tif (response.data.length > 0) {\n\t\t\t\t\tcontext.commit('appendCategories', response.data);\n\t\t\t\t\tcontext.commit('stopLoading', 'categories');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.catch((error) => context.commit('API_FAILURE', error));\n\t},\n\n};\n\nexport default { state, mutations, getters, actions };","/*\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api';\n\nconst state = {\n\tserverData: {}\n};\nconst mutations = {\n\tsetServerData(state, data) {\n\t\tstate.serverData = data;\n\t}\n};\nconst getters = {\n\tgetServerData(state) {\n\t\treturn state.serverData;\n\t}\n};\nconst actions = {};\n\nexport default {state, mutations, getters, actions};\n","/*\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport api from './api';\n\nconst state = {};\nconst mutations = {};\nconst getters = {};\nconst actions = {\n\t/**\n     * Set application config in database\n     * \n\t * @param {Object} context\n     * @param {Object} options\n\t * @param {string} options.app Application name\n\t * @param {boolean} options.key Config key\n\t * @param {boolean} options.value Value to set\n\t * @returns{Promise}\n\t */\n\tsetAppConfig(context, {app, key, value}) {\n\t\treturn api.requireAdmin().then((response) => {\n\t\t\treturn api.post(OC.linkToOCS(`apps/provisioning_api/api/v1/config/apps/${app}/${key}`, 2), {value: value})\n\t\t\t\t.catch((error) => {throw error;});\n\t\t}).catch((error) => context.commit('API_FAILURE', { app, key, value, error }));;\n    }\n};\n\nexport default {state, mutations, getters, actions};\n","/*\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport users from './users';\nimport apps from './apps';\nimport settings from './settings';\nimport oc from './oc';\n\nVue.use(Vuex)\n\nconst debug = process.env.NODE_ENV !== 'production';\n\nconst mutations = {\n\tAPI_FAILURE(state, error) {\n\t\ttry {\n\t\t\tlet message = error.error.response.data.ocs.meta.message;\n\t\t\tOC.Notification.showHtml(t('settings','An error occured during the request. Unable to proceed.')+'<br>'+message, {timeout: 7});\n\t\t} catch(e) {\n\t\t\tOC.Notification.showTemporary(t('settings','An error occured during the request. Unable to proceed.'));\n\t\t}\n\t\tconsole.log(state, error);\n\t}\n};\n\nexport default new Vuex.Store({\n\tmodules: {\n\t\tusers,\n\t\tapps,\n\t\tsettings,\n\t\toc\n\t},\n\tstrict: debug,\n\n\tmutations\n});\n","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue';\nimport { sync } from 'vuex-router-sync';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\n\nsync(store, router);\n\n// CSP config for webpack dynamic chunk loading\n// eslint-disable-next-line\n__webpack_nonce__ = btoa(OC.requestToken)\n\n// Correct the root of the app for chunk loading\n// OC.linkTo matches the apps folders\n// OC.generateUrl ensure the index.php (or not)\n// eslint-disable-next-line\n__webpack_public_path__ = OC.linkTo('settings', 'js/')\n\n// bind to window\nVue.prototype.t = t;\nVue.prototype.OC = OC;\nVue.prototype.OCA = OCA;\nVue.prototype.oc_userconfig = oc_userconfig;\nVue.prototype.oc_current_user = oc_current_user;\n\nconst app = new Vue({\n\trouter,\n\tstore,\n\trender: h => h(App)\n}).$mount('#content');\n\nexport { app, router, store };"],"sourceRoot":""}